<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="domain_info">

 	<select id="selectDI" parameterMap="parameterMap_di"
		resultClass="domainInfo">
		<![CDATA[
	   	SELECT
    		  d.domainid,
    		  d.domainsn,
    		  d.domainname,     		   		  
    		  d.descp
            FROM otppms_domaininfo d
         ]]>
         <dynamic prepend="">
			<isNotNull property="isFilterTag" >
				<isNotEmpty property="isFilterTag">
					<isEqual compareValue="1" property="isFilterTag">
						right join otppms_admin_orgunit ao on ao.domainid=d.domainid 
					</isEqual>
				</isNotEmpty>
			</isNotNull>
		</dynamic>
		
         <![CDATA[
         	WHERE 1=1 
         ]]>
		<dynamic prepend="">
			<isNotNull property="adminId" prepend="and">
				<isNotEmpty property="adminId">
					ao.adminid=#adminId# and ao.orgunitid is null
				</isNotEmpty>
			</isNotNull>
			
 			<isNotNull property="domainSn" prepend="and">
				<isNotEmpty property="domainSn">
					d.domainSn like '%$domainSn$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="domainName" prepend="and">
				<isNotEmpty property="domainName">
					d.domainName like '%$domainName$%'
				</isNotEmpty>
			</isNotNull>			
		</dynamic>	
		<![CDATA[
			order by  d.domainId asc  LIMIT #pageSize#
            OFFSET #startRow#
		]]>
	</select> 	
 	
</sqlMap>
 