<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="agent_info">
	<select id="selectAT" parameterClass="agentInfo"
		resultClass="agentInfo">
		<![CDATA[
    	SELECT
    	     fog.enabled,
    		 fog.agentipaddr,
    		 fog.descp,
    		 fog.pubkey,
    		 fog.agenttype,
    		 fog.agentconfid,
    		 fog.graceperiod,
    		 fog.agentname
            from 
         ]]>
          <dynamic prepend="">
         	<isNotNull property="pageSize" prepend="">
				<isNotEmpty property="pageSize">
					(select top $pageSize$ * from otppms_agentinfo fag where 1=1
				</isNotEmpty>
			</isNotNull>
			<include refid="queryAgentCondition"/>
			<isNotNull property="startRow" prepend="">
				<isNotEmpty property="startRow">
				 	and fag.agentipaddr not in (select top $startRow$ fag.agentipaddr  from otppms_agentinfo fag where 1=1
				</isNotEmpty>
			</isNotNull>
			<include refid="queryAgentCondition"/>
         </dynamic>
		<![CDATA[
			order by fag.agentipaddr asc) order by agentipaddr asc) fog order by fog.agentipaddr asc
		]]>
	</select>
 </sqlMap>
