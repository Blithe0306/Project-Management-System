<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="user_token">
	<select id="selectUT" resultClass="userToken"
		parameterMap="parameterMap_ut">
		<![CDATA[
		    SELECT otppms_user_token.bindid,otppms_user_token.userid,otppms_user_token.domainid,otppms_user_token.token FROM 
         ]]>
		<dynamic prepend="">
         	<isNotNull property="pageSize" prepend="">
				<isNotEmpty property="pageSize">
				(select top $pageSize$ * from otppms_user_token where bindid not in  
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="startRow" prepend="">
				<isNotEmpty property="startRow">
				 (select top $startRow$ bindid from otppms_user_token order by bindid asc) order by bindid asc) otppms_user_token where 1=1    
				</isNotEmpty>
			</isNotNull>
		</dynamic> 
		<dynamic prepend="">
			<isNotNull property="userId" prepend="and">
				<isNotEmpty property="userId">
					otppms_user_token.userid like '%$userId$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="domainId" prepend="and">
				<isNotEmpty property="domainId">
				    <isNotEqual compareValue="0" property="domainId" >					
						otppms_user_token.domainid like '%$domainId$%'
					</isNotEqual>
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="token" prepend="and">
				<isNotEmpty property="token">
					otppms_user_token.token like '%$token$%'
				</isNotEmpty>
			</isNotNull>
		</dynamic>
		<![CDATA[
			order by bindid asc 
		]]>
	</select>
	 
</sqlMap>
