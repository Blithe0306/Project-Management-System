<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
    PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "dtd/sql-map-2.dtd">

<sqlMap namespace="user_token">
	<select id="selectUT" resultClass="userToken"
		parameterMap="parameterMap_ut">
		<![CDATA[
		select * from ( 
		    select rownum as rn, t.* from ( 
		    	select bindid,
		        	userid, 
		        	domainid,
		       		token 
		       	FROM otppms_user_token WHERE 1=1 
         ]]>
		<dynamic prepend="">
			<isNotNull property="userId" prepend="and">
				<isNotEmpty property="userId">
					otppms_user_token.userid like '%$userId$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="domainId" prepend="and">
				<isNotEmpty property="domainId">
				    <isNotEqual compareValue="0" property="domainId" >						
						otppms_user_token.domainid like '%$domainId$%'
					</isNotEqual>
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="token" prepend="and">
				<isNotEmpty property="token">
					otppms_user_token.token like '%$token$%'
				</isNotEmpty>
			</isNotNull>
		</dynamic>
		<![CDATA[
        	order by bindid asc) t where rownum < = #endRow#) tt where rn > #startRow# order by bindid asc
		]]>
	</select>
	

</sqlMap>
