<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="agentconf_info">

	<typeAlias alias="agentConfInfo"
		type="com.ft.otp.manager.authmgr.agentconf.entity.AgentConfInfo" />
		
	<sql id="queryFilter">
		<dynamic prepend="">
			<isNotEmpty property="id" prepend="and">
				<isNotEqual property="id" compareValue="0">
					id = #id#
				</isNotEqual>
			</isNotEmpty>
		</dynamic>
		<dynamic prepend="">
			<isNotNull property="confname" prepend="and">
				<isNotEmpty property="confname">
					confname = #confname#
				</isNotEmpty>
			</isNotNull>
		</dynamic>
	</sql>
		
	<select id="countATConf" resultClass="int" parameterClass="agentConfInfo">
		<![CDATA[
	    	select count(id) from otppms_agentconf WHERE 1=1
	    ]]>
	    <include refid="queryFilter" />
	</select>

	<insert id="insertATConf" parameterClass="agentConfInfo">
		<![CDATA[
    		INSERT INTO otppms_agentconf 
    		(confname, type, userformat, localprotect, remoteprotect, uacprotect,unboundlogin, descp) 
    		VALUES 
    		(#confname#, #type#, #userformat#, #localprotect#, #remoteprotect#, #uacprotect#,#unboundlogin#, #descp#)
    	]]>
	</insert>
	
	<select id="findATConf" resultClass="agentConfInfo"  parameterClass="agentConfInfo" >
		<![CDATA[
		    SELECT
    			id, confname, type, userformat, localprotect, remoteprotect, uacprotect,
	    	       unboundlogin, descp
			from otppms_agentconf WHERE 1=1 
         ]]>
		<include refid="queryFilter" />
	</select>
	
	<update id="updateATConf" parameterClass="agentConfInfo">
		<![CDATA[
	   	UPDATE otppms_agentconf SET 
	   	confname = #confname#, 
	   	type = #type#,userformat = #userformat#,localprotect = #localprotect#,remoteprotect = #remoteprotect#,uacprotect = #uacprotect#,
	   	unboundlogin = #unboundlogin#,descp = #descp#
	   	WHERE id = #id#
		]]>
	</update>
	
	<delete id="deleteATConf" parameterClass="agentConfInfo">
		<![CDATA[
			DELETE FROM otppms_agentconf WHERE 1=1 AND id = #id#
		]]>
	</delete>
	
	<select id="selectATConfList" resultClass="agentConfInfo"  parameterClass="agentConfInfo">
		<![CDATA[
	    	SELECT id, confname, type, userformat, localprotect, remoteprotect, uacprotect,
	    	       unboundlogin, descp
	    	FROM otppms_agentconf 
	    	WHERE 1=1
        ]]>
		<dynamic prepend="">
			<isNotNull property="type">
				<isNotEmpty property="type">
				    <isNotEqual property="type" compareValue="-1" prepend="and">
					type = #type#
					</isNotEqual>
				</isNotEmpty>
			</isNotNull>
		</dynamic>
	</select>
	
</sqlMap>
