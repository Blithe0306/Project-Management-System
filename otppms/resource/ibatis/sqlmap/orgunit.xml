<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="orgunit_info">

	<typeAlias alias="orgunitInfo"
		type="com.ft.otp.manager.orgunit.orgunit.entity.OrgunitInfo" />
	<parameterMap class="orgunitInfo" id="parameterMap_oi">
		<parameter property="orgunitId" javaType="int"
			jdbcType="Integer" />
		<parameter property="orgunitNumber" javaType="string"
			jdbcType="VARCHAR" />
		<parameter property="orgunitName" javaType="string"
			jdbcType="VARCHAR" />
		<parameter property="parentId" javaType="int"
			jdbcType="Integer" />	
		<parameter property="domainId" javaType="int"
		jdbcType="Integer" />
		<parameter property="descp" javaType="string"
			jdbcType="VARCHAR" />	
  </parameterMap>
 	
 	<sql id="queryOrgCondition">
		<dynamic prepend="">
			<isNotEqual compareValue="0" property="orgunitId" prepend="and">
	 			<isNotNull property="orgunitId" >
					<isNotEmpty property="orgunitId">
							orgunitid=#orgunitId#
					</isNotEmpty>
				</isNotNull>
			</isNotEqual>
			
			<isNotNull property="orgunitNumber" prepend="and">
					orgunitnumber=#orgunitNumber#
			</isNotNull>
					
			<isNotEqual compareValue="0" property="domainId" prepend="and">
	 			<isNotNull property="domainId" >
					<isNotEmpty property="domainId">
							domainid=#domainId#
					</isNotEmpty>
				</isNotNull>
			</isNotEqual>
			<isNotEqual compareValue="0" property="createTime" prepend="and">
				createtime=#createTime#
			</isNotEqual>
			
			<isNotEqual compareValue="0" property="parentId" prepend="and">
	 			<isNotNull property="parentId" >
					<isNotEmpty property="parentId">
							parentid=#parentId#
					</isNotEmpty>
				</isNotNull>
			</isNotEqual>
			
		</dynamic>	
	</sql>
 	
 	
	<select id="selectWOI" parameterMap="parameterMap_oi"
		resultClass="orgunitInfo">
		<![CDATA[
	   	SELECT
    		  orgunitid,
    		  orgunitnumber,
    		  orgunitname, 
    		  parentid,  
    		  domainid,   		  
    		  descp
            FROM otppms_orgunitinfo WHERE 1=1 
         ]]>
         <dynamic prepend="">
         	<isNotNull property="orgunitName" prepend="and">
				<isNotEmpty property="orgunitName">
						orgunitname=#orgunitName#
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="orgunitNumber" prepend="and">
				<isNotEmpty property="orgunitNumber">
						orgunitNumber=#orgunitNumber#
				</isNotEmpty>
			</isNotNull>
		</dynamic>	
		<include refid="queryOrgCondition" />
		 order by orgunitid
	</select>
	
	<select id="findOI" parameterMap="parameterMap_oi"
		resultClass="orgunitInfo">
		<![CDATA[
	   	SELECT
    		  orgunitid,
    		  orgunitnumber,
    		  orgunitname, 
    		  parentid,  
    		  domainid,   		  
    		  descp
            FROM otppms_orgunitinfo WHERE 1=1 
         ]]>
         <include refid="queryOrgCondition" />		
	</select>
	
	<select id="selectORG" parameterMap="parameterMap_oi"
		resultClass="orgunitInfo">
		<![CDATA[
	   	SELECT
    		  orgunitid,
    		  orgunitnumber,
    		  orgunitname, 
    		  parentid,  
    		  domainid,   		  
    		  descp
            FROM otppms_orgunitinfo WHERE 1=1 
         ]]>
         <isNotNull property="domainId" prepend="and">
			<isNotEmpty property="domainId">
					domainid=#domainId#
			</isNotEmpty>
		</isNotNull>		
	</select>
	
	<select id="countOI" resultClass="int"
		>
		<![CDATA[
	    	select count(orgunitid) from otppms_orgunitinfo  where 1=1 
	    ]]>
		<include refid="queryOrgCondition" />
	</select>
	
	
	<insert id="insertOI" parameterClass="orgunitInfo">
   <![CDATA[ 
   insert into otppms_orgunitinfo(orgunitnumber, orgunitname, parentid,domainid, descp,createtime) 
   		values(#orgunitNumber#, #orgunitName#, #parentId#, #domainId#, #descp#,#createTime#)
   ]]>
  </insert>
  
   <update id="updateOI" parameterClass="orgunitInfo">
   <![CDATA[
   update otppms_orgunitinfo set orgunitnumber=#orgunitNumber#, orgunitname=#orgunitName#,parentid=#parentId#,domainid=#domainId#,descp=#descp# where orgunitid=#orgunitId#
     ]]>
  </update>
  
   <delete id="deleteOI" parameterMap="parameterMap_oi">
		<![CDATA[
    		DELETE FROM	otppms_orgunitinfo WHERE 1=1 
    	]]>	
		<dynamic prepend="">
			<isNotNull property="orgunitId" prepend="and"><!-- use delete more org -->
				orgunitid = #orgunitId#
			</isNotNull>
		</dynamic>
	</delete>
  
  	<select id="findOR" resultClass="orgunitInfo"
		parameterMap="parameterMap_oi">
		<![CDATA[
		   SELECT
    		  orgunitid,
    		  orgunitnumber,
    		  orgunitname, 
    		  parentid,  
    		  domainid,   		  
    		  descp
            FROM otppms_orgunitinfo WHERE 1=1 
         ]]>
        <dynamic prepend="">
			<isNotEqual compareValue="0" property="orgunitId" prepend="and">
	 			<isNotNull property="orgunitId" >
					<isNotEmpty property="orgunitId">
							orgunitid=#orgunitId#
					</isNotEmpty>
				</isNotNull>
			</isNotEqual>
			
			<isNotNull property="orgunitName" prepend="and">
				<isNotEmpty property="orgunitName">
						orgunitname=#orgunitName#
				</isNotEmpty>
			</isNotNull>
					
			<isNotEqual compareValue="0" property="domainId" prepend="and">
	 			<isNotNull property="domainId" >
					<isNotEmpty property="domainId">
							domainid=#domainId#
					</isNotEmpty>
				</isNotNull>
			</isNotEqual>
			
			<isNotEqual compareValue="0" property="createTime" prepend="and">
				createtime=#createTime#
			</isNotEqual>
			
			<isNotEqual compareValue="0" property="parentId" prepend="and">
	 			<isNotNull property="parentId" >
					<isNotEmpty property="parentId">
							parentid=#parentId#
					</isNotEmpty>
				</isNotNull>
			</isNotEqual>			
		</dynamic>
	</select>
	
	
	<select id="selectOrgSon" parameterMap="parameterMap_oi"
		resultClass="orgunitInfo">
		<![CDATA[
	   	SELECT
    		  orgunitid,
    		  orgunitnumber,
    		  orgunitname, 
    		  parentid,  
    		  domainid,   		  
    		  descp
            FROM otppms_orgunitinfo WHERE 1=1 
         ]]>
         <isNotNull property="parentId" prepend="and">
			<isNotEmpty property="parentId">
					parentid=#parentId#
			</isNotEmpty>
		</isNotNull>		
	</select>
	
</sqlMap>
 