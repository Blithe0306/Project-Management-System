<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="tokenspec_info">
    <typeAlias alias="tokenSpecInfo"
		type="com.ft.otp.manager.tokenspec.entity.TokenSpec" />
 	<parameterMap class="tokenSpecInfo" id="parameterMap_tks"> 
		<!-- tokenspec info -->   
        <parameter property="otplen"      	javaType="int" 		jdbcType="INTEGER" /> 
        <parameter property="tokenType"     javaType="int" 		jdbcType="INTEGER" />
	    <parameter property="algid"       	javaType="int"  	jdbcType="INTEGER" />
        <parameter property="intervaltime" 	javaType="int" 		jdbcType="INTEGER" />
	    <parameter property="begintime"   	javaType="int" 		jdbcType="INTEGER" />
		<parameter property="maxauthcnt"  	javaType="int" 		jdbcType="INTEGER" />
		<parameter property="initauthnum" 	javaType="int" 		jdbcType="INTEGER" />
		<parameter property="haformat"    	javaType="int" 		jdbcType="INTEGER" />
		<parameter property="halen"    		javaType="int" 		jdbcType="INTEGER" />
		<parameter property="cardrow"  		javaType="int" 		jdbcType="INTEGER" />
		<parameter property="cardcol"  		javaType="int" 		jdbcType="INTEGER" />
		<parameter property="rowstart" 		javaType="string" 	jdbcType="VARCHAR" /> 	
		<parameter property="colstart" 		javaType="string" 	jdbcType="VARCHAR" /> 
		<parameter property="signsuite" 	javaType="string" 	jdbcType="VARCHAR" /> 
		<parameter property="cvssuite" 		javaType="string" 	jdbcType="VARCHAR" /> 	
		<parameter property="crsuite" 		javaType="string" 	jdbcType="VARCHAR" /> 
		<parameter property="atid" 			javaType="string" 	jdbcType="VARCHAR" /> 
		<parameter property="updatemode"    javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="updatelimit"   javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="updateresplen" javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="puk1mode"      javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="puk1len"       javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="puk1itv"       javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="puk2mode"      javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="puk2len"       javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="puk2itv"       javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="maxcounter"    javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="syncmode"      javaType="int" 		jdbcType="INTEGER" /> 
		<parameter property="descp"         javaType="int" 		jdbcType="VARCHAR" /> 
	   
	    <!-- extend info -->   
	    <parameter property="pageSize" 		javaType="int" 		jdbcType="INTEGER"  />
	    <parameter property="startRow"		javaType="int" 		jdbcType="INTEGER"  /> 
	    <parameter property="countValue" 	javaType="int" 		jdbcType="INTEGER"  /> 
	    <parameter property="prdLabel" 		javaType="int" 		jdbcType="INTEGER"  />
	    <parameter property="phyLabel" 		javaType="int" 		jdbcType="INTEGER"  />
	 </parameterMap>
	
	<!-- query all tokenspec -->
	<select id="selectTKSPEC" parameterClass="tokenSpecInfo" resultClass="tokenSpecInfo">
		<![CDATA[
		  select 
		        tp.specid,
    		    tp.tokentype as tokenType,
	    		tp.algid,
	    		tp.signsuite,
	    		tp.cvssuite,
	    		tp.crsuite,
	    		tp.atid,
	    		tp.otplen,
	    		tp.intervaltime,
	    		tp.begintime,
	    		tp.maxauthcnt,
                tp.initauthnum,
				tp.haformat,
				tp.halen,
				tp.cardrow,    		
				tp.cardcol,	    		
				tp.rowstart,    		
				tp.colstart,	 	
				tp.updatemode,
				tp.updatelimit ,
				tp.updateresplen ,
				tp.puk1mode ,
				tp.puk1len,
				tp.puk1itv,
				tp.puk2mode ,
				tp.puk2len,
				tp.puk2itv ,
				tp.maxcounter,
				tp.syncmode,
				tp.descp 
           from otppms_tokenspec tp  where 1=1
    	]]>
	</select> 
	
	<!-- find one tokenspec -->
	<select id="findTP" resultClass="tokenSpecInfo" parameterClass="tokenSpecInfo">
		<![CDATA[
		    SELECT   p.specid,
		             p.tokentype as tokenType,
		             p.algid,
		             p.signsuite ,
		             p.cvssuite,
		             p.crsuite,
		             p.otplen,
		             p.intervaltime,
		             p.begintime
	    	  from otppms_tokenspec p where 1=1
          ]]>
		<dynamic prepend="">
		     <isNotNull>
				<isNotEmpty prepend="and" property="specid">
					 p.specid = #specid#
				</isNotEmpty>
			</isNotNull>
		</dynamic>
	</select>
 
 	 <!-- insert tokenspec -->
	 <insert id="insertSPEC" parameterClass="tokenSpecInfo">
		<![CDATA[
    		INSERT INTO otppms_tokenspec(specid,tokentype,algid,signsuite, cvssuite, crsuite ,atid ,     
			otplen,intervaltime,begintime, maxauthcnt,initauthnum,haformat,halen,cardrow,cardcol,
			rowstart,colstart,updatemode,updatelimit,updateresplen,puk1mode, puk1len,puk1itv ,
			puk2mode ,puk2len ,puk2itv,maxcounter,syncmode,descp)
			VALUES(#specid#,#tokenType#,#algid#,#signsuite#, #cvssuite#, #crsuite# ,#atid# ,     
			#otplen#,#intervaltime#,#begintime# , #maxauthcnt#,#initauthnum#,#haformat#,#halen#,#cardrow#,#cardcol#,
			#rowstart#,#colstart#,#updatemode#,#updatelimit#,#updateresplen#,#puk1mode#, #puk1len#,#puk1itv#,
			#puk2mode# ,#puk2len# ,#puk2itv#,#maxcounter#,#syncmode#,#descp#)
    	]]>
	 </insert> 

</sqlMap>
