<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="resords">
	<typeAlias alias="resords" type="com.ft.otp.manager.resords.entity.Resords" />
	
	<select id="countUI" resultClass="int" parameterClass="resords">
		<![CDATA[
	    	select count(id) from otppms_record_back  p where 1=1
	    ]]>
		<dynamic prepend="">
			<isNotNull property="prjid" prepend="and">
				<isNotEmpty property="prjid">
					p.prjid = #prjid#
				</isNotEmpty>
			</isNotNull>
		</dynamic>
	</select>
	<select id="selectUI" parameterClass="resords" resultClass="resords">
		<![CDATA[
	    	 SELECT 
	    	 id,
		      prjid,
	   		recordtime,
	   		endrecordtime,
	   		remark,
	   		cutomer,
	   		recordUser,
	   	    reason,
	   		results,
	   		createtime,
	   		operator
		   from otppms_record_back p
		  where  1=1 
	    ]]>
		<isNotNull>
			<isGreaterThan property="id" prepend="and"
				compareValue="0">
				p.id = #id#
			</isGreaterThan>
		</isNotNull>
		<isNotNull property="prjid" prepend="and">
			<isNotEmpty property="prjid">
				p.prjid like '%$prjid$%'
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="recordUser" prepend="and">
			<isNotEmpty property="recordUser">
				p.recordUser like '%$recordUser$%'
			</isNotEmpty>
		</isNotNull>
	    <![CDATA[
			ORDER BY id DESC LIMIT #pageSize#
            OFFSET #startRow#
		]]>
	</select>
	
	
	<select id="findUI" parameterClass="resords" resultClass="resords">
		<![CDATA[
	    	 SELECT 
	    	 id,prjid,
	   		recordtime,
	   		endrecordtime,
	   		remark,
	   		cutomer,
	   		recordUser,
	   	    reason,
	   		results,
	   		createtime,
	   		operator
		   from otppms_record_back
		  where  1=1 
	    ]]>
		<isNotNull>
			<isGreaterThan property="id" prepend="and"
				compareValue="0">
				id = #id#
			</isGreaterThan>
		</isNotNull>
	</select>
	
	<insert id="insertUI" parameterClass="resords">
		<![CDATA[
	   		INSERT INTO otppms_record_back(
	   		prjid,
	   		recordtime,
	   		endrecordtime,
	   		remark,
	   		cutomer,
	   		recordUser,
	   	    reason,
	   		results,
	   		createtime,
	   		operator)
	   		VALUES(#prjid#,#recordtime#,#endrecordtime#,#remark#,#cutomer#,#recordUser#,#reason#,
	   		#results#,#createtime#,#operator#)
	   	]]>
	</insert>

	<!-- update projects base info -->
	<update id="updateUI" parameterClass="resords">
		<![CDATA[
			UPDATE otppms_record_back SET 
			prjid=#prjid#,
    		cutomer=#cutomer#,
    		recordUser=#recordUser#,
    		recordtime=#recordtime#,
    		endrecordtime=#endrecordtime#,
    		remark=#remark#,
    		reason=#reason#,
    		results=#results#,
    		createtime=#createtime#,
    		operator=#operator#
			WHERE  1=1 
		]]>
		<isNotNull>
			<isNotEmpty property="id" prepend="and">
				id = #id#
			</isNotEmpty>
		</isNotNull>
	</update>
	<!-- delete resords -->
	<delete id="deleteUI" parameterClass="resords">
		<![CDATA[
			DELETE FROM otppms_record_back WHERE 1=1 and id = #id#
		]]>
	</delete>
</sqlMap>