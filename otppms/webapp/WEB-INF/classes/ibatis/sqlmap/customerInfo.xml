<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="customer_info">
	<typeAlias alias="custInfo" type="com.ft.otp.manager.customer.entity.CustomerInfo" />
	
	<parameterMap class="custInfo" id="parameterMap_ui">
		<parameter property="id" javaType="int" jdbcType="INTEGER" />
		<parameter property="custid" javaType="string" jdbcType="VARCHAR" />
		<parameter property="custname" javaType="string" jdbcType="VARCHAR" />
		<parameter property="dept" javaType="string" jdbcType="VARCHAR" />
		<parameter property="contacts" javaType="string" jdbcType="VARCHAR" />
		<parameter property="createtime" javaType="int" jdbcType="INTEGER" />
		<parameter property="operator" javaType="string" jdbcType="VARCHAR" />
		<parameter property="startRow" javaType="int" jdbcType="INTEGER" />
		<parameter property="pageSize" javaType="int" jdbcType="INTEGER" />
	</parameterMap>
	
	<resultMap id="resultMap_ui" class="custInfo">
		<result property="id" column="id" nullValue="" />
		<result property="custid" column="custid" nullValue="" />
		<result property="custname" column="custname" nullValue="" />
		<result property="dept" column="dept" nullValue="" />
		<result property="contacts" column="contacts" nullValue="" />
		<result property="createtime" column="createtime" nullValue="" />
		<result property="operator" column="operator" nullValue="" />
	</resultMap>
	
	<select id="selectCust" resultClass="custInfo" parameterClass="custInfo">
		<![CDATA[
	    	select id,custid,custname,dept,contacts,createtime,operator from otppms_customer c where 1=1
	    ]]>
	    <dynamic prepend="">
			<isNotNull property="custid" prepend="and">
				<isNotEmpty property="custid">
					c.custid like '%$custid$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="custname" prepend="and">
				<isNotEmpty property="custname">
					c.custname like '%$custname$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="dept" prepend="and">
				<isNotEmpty property="dept">
					c.dept = #dept#
				</isNotEmpty>
			</isNotNull>
		</dynamic>
		<![CDATA[
	    	order by c.createtime desc
	    ]]>
	    <![CDATA[
			LIMIT #pageSize# OFFSET #startRow#
		]]>
	</select>
	
	<select id="selectCust4Equal" resultClass="custInfo" parameterClass="custInfo">
		<![CDATA[
	    	select id,custid,custname,dept,contacts,createtime,operator from otppms_customer c where 1=1
	    ]]>
	    <dynamic prepend="">
			<isNotNull property="custid" prepend="and">
				<isNotEmpty property="custid">
					c.custid = #custid#
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="custname" prepend="and">
				<isNotEmpty property="custname">
					c.custname = #custname#
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="dept" prepend="and">
				<isNotEmpty property="dept">
					c.dept = #dept#
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="id" prepend="and">
				<isNotEmpty property="id">
					c.id != #id#
				</isNotEmpty>
			</isNotNull>
		</dynamic>
		<![CDATA[
	    	order by c.createtime desc
	    ]]>
	</select>
	
	<select id="selectMaxCustid" resultClass="custInfo" parameterClass="custInfo">
		<![CDATA[
	    	select max(custid) as custid from otppms_customer c where 1=1
	    ]]>
	    <dynamic prepend="">
			<isNotNull property="custid" prepend="and">
				<isNotEmpty property="custid">
					c.custid like '%$custid$%'
				</isNotEmpty>
			</isNotNull>
		</dynamic>
	</select>
	
	<select id="countUI" resultClass="int" parameterClass="custInfo">
		<![CDATA[
	    	select count(id) from otppms_customer where 1=1
	    ]]>
	    <dynamic prepend="">
			<isNotNull property="custid" prepend="and">
				<isNotEmpty property="custid">
					custid = #custid#
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="custname" prepend="and">
				<isNotEmpty property="custname">
					custname = #custname#
				</isNotEmpty>
			</isNotNull>
		</dynamic>
	</select>
	
	<insert id="insertUI" parameterClass="custInfo">
		<![CDATA[
    		INSERT INTO otppms_customer(custid,custname,dept,contacts,createtime,operator)
    		VALUES(#custid#,#custname#,#dept#,#contacts#,#createtime#,#operator#)
    	]]>
	</insert>
    
    <!-- update -->
    <update id="updateUI" parameterClass="custInfo">
		<![CDATA[
			UPDATE otppms_customer SET 
			custid=#custid#,
			custname=#custname#,
			dept=#dept#,
			contacts=#contacts#
			WHERE  1=1 
		]]>
		<dynamic prepend="">
			<isGreaterThan property="id" compareValue="-1"  prepend="and">
	         	id = #id#
	        </isGreaterThan>
		</dynamic>
	</update>
  
	<!-- delete -->
	<delete id="deleteUI" parameterClass="custInfo">
		<![CDATA[
			DELETE FROM otppms_customer WHERE 1=1 and id = #id#
		]]>
	</delete>
	
</sqlMap>
