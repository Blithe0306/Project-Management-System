<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="notice_info">

	<typeAlias alias="noticeInfo"
		type="com.ft.otp.manager.confinfo.portal.entity.ProNoticeInfo" />
	
	
	<sql id="queryFilter">
		<dynamic prepend="">           
			<isNotEmpty property="id" prepend="and">
				<isNotEqual property="id" compareValue="0">
					id = #id#
				</isNotEqual>
			</isNotEmpty>
		</dynamic>
		
		<isNotNull property="batchIdsInt" prepend="and">
				id IN
				<iterate property="batchIdsInt" open="(" close=")"
					conjunction=",">
					#batchIdsInt[]#
				</iterate>
		</isNotNull>
		
		<isNotNull property="systype" prepend="and">
				<isNotEqual property="systype" compareValue="-1">
					systype = #systype#
				</isNotEqual>
		</isNotNull>
		<isNotNull>
			<isNotEmpty property="title" prepend="and">
				title like '%$title$%'
			</isNotEmpty>
		</isNotNull>

		<isGreaterThan compareValue="0" property="createtime" prepend="and">
			<![CDATA[ createtime >= #createtime#]]>
		</isGreaterThan>
		
		<isGreaterThan compareValue="0" property="expiretime" prepend="and">
			<![CDATA[ expiretime <= #expiretime#]]>
		</isGreaterThan>
		
	</sql>
	
	
	<select id="countNotice" parameterClass="noticeInfo"
		resultClass="int">
		<![CDATA[
	   	select count(id) from otppms_portal_notice where 1=1
        ]]>
        <include refid="queryFilter" />
	</select>
	
	<insert id="addNotice" parameterClass="noticeInfo">
		<![CDATA[
    		INSERT INTO otppms_portal_notice(systype,createuser,createtime,expiretime,content,title)
    		VALUES(#systype#,#createuser#,#createtime#,#expiretime#,#content#,#title#)    	
    	]]>
	</insert>
	
	<delete id="delNotice" parameterClass="noticeInfo">
		<![CDATA[
	 	  delete FROM otppms_portal_notice where 1=1
         ]]>
		<include refid="queryFilter" />
	</delete>
	
	<select id="findNotice" resultClass="noticeInfo"
		parameterClass="noticeInfo">
		<![CDATA[
	   		SELECT
	   			id,
	  			systype,
	  			createuser,
	  			createtime,
	  			expiretime,
	  			content,
	  			title
    	    from otppms_portal_notice where 1=1
         ]]>
		<include refid="queryFilter" />
		<![CDATA[
         	ORDER BY createtime DESC
         ]]>
	</select>
	
	<update id="updateNotice" parameterClass="noticeInfo">
		<![CDATA[
	   		update otppms_portal_notice 
	   		set 	systype=#systype#,
	   				title=#title#, 
	   				content=#content#, 
	   				expiretime=#expiretime#
	   		where id = #id#
        ]]>

	</update>
	
</sqlMap>
